<div class="display" style="display:flex; justify-content:center;text-align: center">
  <div class="box" style="flex-wrap: wrap">
    <h2 style="font-weight: bold; color: grey;">和聲範例展示</h2>
    <button id="play" style="font-size: large; padding: 8px; border-radius: 5px">Play Success Tone</button>
  </div>
</div>


<script>
document.getElementById("play").addEventListener("click", () => {
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)()
  
  // 建立兩個 oscillator 來產生和聲
  const osc1 = audioCtx.createOscillator()
  const osc2 = audioCtx.createOscillator()

  // 主音 A4 = 440Hz
  osc1.frequency.value = 440

  // 五度音 E5 = 440 * 1.5
  osc2.frequency.value = 440 * 1.5

  // 淡入淡出避免突兀
  const gainNode = audioCtx.createGain()
  gainNode.gain.setValueAtTime(0, audioCtx.currentTime)
  gainNode.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 0.05)
  gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3)

  // Connect nodes
  osc1.connect(gainNode)
  osc2.connect(gainNode)
  gainNode.connect(audioCtx.destination)

  osc1.start()
  osc2.start()
  osc1.stop(audioCtx.currentTime + 0.3)
  osc2.stop(audioCtx.currentTime + 0.3)
  
  const osc3 = audioCtx.createOscillator()

  osc3.frequency.value = 440 * 1.25 // 大三度（C#）
  osc3.connect(gainNode)
  osc3.start()
  osc3.stop(audioCtx.currentTime + 0.3)
})
</script>
